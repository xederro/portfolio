const regMail=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function validate(){let a=document.getElementById("email"),s=document.getElementById("name"),i=document.getElementById("password"),e=document.getElementById("rpassword");if(a.setCustomValidity(""),s.setCustomValidity(""),i.setCustomValidity(""),e.setCustomValidity(""),regMail.test(a.value.toLowerCase()))if(i.value!==e.value)e.setCustomValidity("Your passwords don't match!"),e.reportValidity();else if(s.value.length<1)s.setCustomValidity("Your name is empty"),s.reportValidity();else if(i.value.length<8)i.setCustomValidity("Your password is to short!"),i.reportValidity();else if(/[0-9]/.test(i.value))if(/[a-z]/.test(i.value))if(/[A-Z]/.test(i.value)){let e=new FormData;e.append("email",a.value),e.append("name",s.value),e.append("password",i.value);let t=new XMLHttpRequest;t.open("POST","/index.php?page=authRegister"),t.send(e),t.onreadystatechange=function(){var e;4===t.readyState&&200===t.status&&("email"===(e=JSON.parse(t.responseText)).error?(a.setCustomValidity("There is user with this email!"),a.reportValidity()):"server"===e.error?alert("There is something wrong. Please try again later"):document.location.href="/")}}else i.setCustomValidity("Your password should contain at least one upper case!"),i.reportValidity();else i.setCustomValidity("Your password should contain at least one lower case!"),i.reportValidity();else i.setCustomValidity("Your password should contain at least one digit!"),i.reportValidity();else a.setCustomValidity("Your email is invalid!"),a.reportValidity()}