const Link=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/;function validate(){let a=document.getElementById("short"),o=document.getElementById("long");if(a.setCustomValidity(""),o.setCustomValidity(""),Link.test(o.value)){let e=new FormData;e.append("short",a.value),e.append("long",o.value);let t=new XMLHttpRequest;t.open("POST","/index.php?page=short"),t.send(e),t.onreadystatechange=function(){var e;4===t.readyState&&200===t.status&&("link"===(e=JSON.parse(t.responseText)).error?(a.setCustomValidity("There is link with this short form!"),a.reportValidity()):"server"===e.error?alert("There is something wrong. Please try again later"):document.location.href="/Short")}}else o.setCustomValidity("Your link is invalid!"),o.reportValidity()}let formData;function del(e){formData=new FormData,formData.append("link",e.toString()),modal()}function approve(){let e=document.getElementById("pass");if(8<=!e.value.length)e.setCustomValidity("Your password is to short!"),e.reportValidity();else{formData.append("password",e.value);let t=new XMLHttpRequest;t.open("POST","/index.php?page=deleteShort"),t.send(formData),t.onreadystatechange=function(){var e;4===t.readyState&&200===t.status&&(console.log(t.responseText),"auth"===(e=JSON.parse(t.responseText)).error?alert("You are not the owner of this link "):"server"===e.error?alert("There is something wrong. Please try again later"):document.location.href="/Short")}}}