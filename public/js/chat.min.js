var msgBox=document.getElementById("msgBox");firebase.initializeApp(firebaseConfig),firebase.analytics(),firebase.auth().signInAnonymously().then(()=>{}).catch(e=>{console.error("Error while anonymous auth",e)});var query=firebase.firestore().collection("messages").orderBy("timestamp","asc").limit(12);function sendMsg(){var e=document.forms[0],s=e[1],e={nick:e[0].value,message:s.value,timestamp:firebase.firestore.FieldValue.serverTimestamp()};firebase.firestore().collection("messages").add(e).catch(function(e){console.error("Error writing new message to database",e)}),s.value=""}query.onSnapshot(function(e){e.docChanges().forEach(function(e){var s;"removed"===e.type?msgBox.removeChild(document.getElementById(e.doc.id)):(s=e.doc.data(),msgBox.innerHTML+='<div class="m-2 p-2 alert-primary" style="font-size: 1rem" id="'+e.doc.id+'"><b style="font-size: 1rem">'+s.nick+" at "+new Date(s.timestamp.toDate()).toUTCString()+' </b><hr class="m-0 p-0">'+s.message+"</div>"),msgBox.scrollTop=msgBox.scrollHeight})});