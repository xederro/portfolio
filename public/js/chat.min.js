var msgBox=document.getElementById("msgBox"),firebaseConfig={apiKey:"AIzaSyBUa-l4Xod9T7Dtcyf1G4m_yEVZd5FV1Eg",authDomain:"chat-99d1b.firebaseapp.com",projectId:"chat-99d1b",storageBucket:"chat-99d1b.appspot.com",messagingSenderId:"117171095111",appId:"1:117171095111:web:2bcfb306db0e54302b5362",measurementId:"G-4XQBQ0FZ1R"};firebase.initializeApp(firebaseConfig),firebase.analytics(),firebase.auth().signInAnonymously().then(()=>{}).catch(e=>{console.error("Error while anonymous auth",e)});var query=firebase.firestore().collection("messages").orderBy("timestamp","asc").limit(12);function sendMsg(){var e=document.forms[0],a=e[1],e={nick:e[0].value,message:a.value,timestamp:firebase.firestore.FieldValue.serverTimestamp()};firebase.firestore().collection("messages").add(e).catch(function(e){console.error("Error writing new message to database",e)}),a.value=""}query.onSnapshot(function(e){e.docChanges().forEach(function(e){var a;"removed"===e.type?msgBox.removeChild(document.getElementById(e.doc.id)):(a=e.doc.data(),msgBox.innerHTML+='<div class="m-2 p-2 alert-primary" style="font-size: 1rem" id="'+e.doc.id+'"><b style="font-size: 1rem">'+a.nick+" at "+new Date(a.timestamp.toDate()).toUTCString()+' </b><hr class="m-0 p-0">'+a.message+"</div>"),msgBox.scrollTop=msgBox.scrollHeight})});